

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PHP &mdash; My Scribblings 0.1.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Code Tools" href="../tools/tools-index.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> My Scribblings
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../asp.net-webforms/index.html">ASP.NET WebForms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../asp.net-webforms/best-practices.html">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../asp.net-webforms/best-practices.html#turn-off-viewstate">Turn off ViewState</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../asp.net-webforms/best-practices.html#disable-on-page-directive">Disable on Page directive</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../asp.net-webforms/code-blocks.html">Code Blocks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../code-design/code-design-index.html">Code Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../code-design/code-design-index.html#exception-vs-boolean-cd001">Exception vs Boolean <code class="docutils literal notranslate"><span class="pre">[CD001]</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../docker/index.html">Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../docker/index.html#space-usage-001">Space Usage </a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker/index.html#save-docker-image-002">Save docker image </a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker/index.html#change-vhd-location-003">Change VHD location </a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker/index.html#check-these-links">Check these links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gradle/gradle-index.html">Gradle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gradle/gradle-index.html#what-is-gradle">What is Gradle?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gradle/gradle-index.html#installing-gradle">Installing Gradle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gradle/gradle-index.html#basics-concepts">Basics Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gradle/gradle-index.html#build-gradle">build.gradle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gradle/gradle-index.html#quite-mode">Quite mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gradle/gradle-index.html#project">Project</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gradle/gradle-index.html#task">Task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gradle/gradle-index.html#list-all-tasks">List all tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gradle/gradle-index.html#dependson">dependsOn</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gradle/gradle-index.html#finalizedby">finalizedBy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gradle/gradle-index.html#mustrunafter">mustRunAfter</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../git/git-index.html">Git</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../git/git-index.html#deleting-all-previous-commits-in-git-001">Deleting all previous commits in Git </a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git-index.html#rename-local-and-remote-branch-002">Rename local and remote branch </a></li>
<li class="toctree-l2"><a class="reference internal" href="../git/git-index.html#set-proxy-in-git-003">Set proxy in Git </a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/guides-index.html">Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/guides-index.html#aio">AIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/guides-index.html#discrete-math">Discrete Math</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/guides-index.html#security">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/guides-index.html#web-development">Web Development</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../html/index.html">HTML CSS &amp; Javascript</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../html/html.html">HTML</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../html/html.html#special-characters-codes">Special characters codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../html/html.html#submitting-readonly-fields">Submitting readonly fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../html/js.html">Javascript</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../html/js.html#jquery-click-not-working">jQuery click not working</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../oracle/index.html">Oracle</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../oracle/dba.html">DBA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../oracle/dba.html#notes">Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../oracle/sql.html">SQL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../oracle/sql.html#sql-to-update-a-column-from-another-table">SQL to update a column from another table</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../oracle/plsql.html">PL/SQL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../oracle/plsql.html#block">Block</a></li>
<li class="toctree-l3"><a class="reference internal" href="../oracle/plsql.html#notes">Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/tools-index.html">Code Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools/tools-index.html#code-review">Code Review</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">PHP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#check-if-array-is-empty">Check if array is empty</a></li>
<li class="toctree-l2"><a class="reference internal" href="#session-handling-in-php">Session Handling in PHP</a></li>
<li class="toctree-l2"><a class="reference internal" href="#session">Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-specific-version-of-package-in-composer">Install specific version of package in Composer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#php-short-forms">PHP Short Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="#alternative-syntax-for-control-structures">Alternative syntax for control structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#echo">Echo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#if-else-if">IF &amp; ELSE IF</a></li>
<li class="toctree-l3"><a class="reference internal" href="#for-each">For each</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#string-functions">String Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#checking-variables">Checking Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#type-casting-and-conversion">Type Casting and Conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#php-design">PHP Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#layout-page">Layout Page</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why">Why?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#page-itself">1. Page Itself</a></li>
<li class="toctree-l3"><a class="reference internal" href="#template-php-which-is-your-main-site-template">2. template.php which is your main site template</a></li>
<li class="toctree-l3"><a class="reference internal" href="#and-finally-links-tpl-php-is-the-actual-page-template">3. and finally links.tpl.php is the actual page template:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#passing-php-form-validate-error-message-back-to-submit-form">Passing php form validate error message back to submit form</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#session-way">Session way</a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-way">POST way</a></li>
<li class="toctree-l3"><a class="reference internal" href="#note">Note</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#redirect-to-another-page">Redirect to another page</a></li>
<li class="toctree-l2"><a class="reference internal" href="#check-query-parameters">Check query parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Session Handling in PHP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Session</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#get-the-class-name">Get the class name</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">My Scribblings</a>
        
      </nav>


      
      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>PHP</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/php/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="php">
<h1>PHP<a class="headerlink" href="#php" title="Permalink to this headline">¶</a></h1>
<div class="section" id="check-if-array-is-empty">
<h2>Check if array is empty<a class="headerlink" href="#check-if-array-is-empty" title="Permalink to this headline">¶</a></h2>
<p>If you just need to check if there are ANY elements in the array</p>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>if (empty($playerlist)) {
  // list is empty.
}
</pre></div>
</div>
<p>If you need to clean out empty values before checking (generally done to prevent explodeing weird strings):</p>
</div>
<div class="section" id="session-handling-in-php">
<h2>Session Handling in PHP<a class="headerlink" href="#session-handling-in-php" title="Permalink to this headline">¶</a></h2>
<p>To use session:</p>
<ul class="simple">
<li>Start a session via session_start(). The session_start() starts a new session or resume the existing session.</li>
<li>The superglobal associative array $_SESSION maintain data of the session.</li>
<li>You can check if a key-value pair exists via isset($_SESSION[‘key’]).</li>
<li>You can set a key-value pair for this session via $_SESSION[‘key’] = value.</li>
<li>You can retrieve value of a particular key via $_SESSION[‘key’].</li>
<li>You can remove a key-value pair via unset($_SESSION[‘key’]).</li>
<li>You can use function session_id() to retrieve the session ID.</li>
<li>To terminate the session explicitly, use session_write_close().</li>
</ul>
<p>The procedure is:
1. Authenticate the user’s credential.
2. Create a new session via session_start(), and place some tokens inside the session, e.g. $_SESSION[‘isLogin’] = TRUE.
3. On all the other pages, resume the session ALSO via session_start(), and check if $_SESSION[‘isLogin’] is there, which indicates a resumed session rather than a new session.</p>
</div>
<div class="section" id="session">
<h2>Session<a class="headerlink" href="#session" title="Permalink to this headline">¶</a></h2>
<p>You need make sure to start the session at the top of every PHP file where you want to use the $_SESSION superglobal. Like this:</p>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?php
  session_start();
  echo $_SESSION[&#39;youritem&#39;];
?&gt;
</pre></div>
</div>
</div>
<div class="section" id="install-specific-version-of-package-in-composer">
<h2>Install specific version of package in Composer<a class="headerlink" href="#install-specific-version-of-package-in-composer" title="Permalink to this headline">¶</a></h2>
<p>composer require vendor/package:version</p>
<p>for example:</p>
<p>composer require refinery29/test-util:0.10.2</p>
</div>
<div class="section" id="php-short-forms">
<h2>PHP Short Forms<a class="headerlink" href="#php-short-forms" title="Permalink to this headline">¶</a></h2>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?php if ($expression == true): ?&gt;
  This will show if the expression is true.
&lt;?php else: ?&gt;
  Otherwise this will show.
&lt;?php endif; ?&gt;

&lt;?php for ($i = 0; $i &lt; 5; ++$i): ?&gt;
Hello, there!
&lt;?php endfor; ?&gt;

&lt;? foreach($DATA as $row): ?&gt;
&lt;li&gt;&lt;a href=&quot;&lt;?=$row[&#39;link&#39;]?&gt;&quot; target=&quot;_blank&quot;&gt;&lt;?=$row[&#39;name&#39;]?&gt;&lt;/a&gt;&lt;/li&gt;
&lt;? endforeach ?&gt;

echo empty($address[&#39;street2&#39;]) ? &quot;Street2 is empty!&quot; : $address[&#39;street2&#39;];
</pre></div>
</div>
</div>
<div class="section" id="alternative-syntax-for-control-structures">
<h2>Alternative syntax for control structures<a class="headerlink" href="#alternative-syntax-for-control-structures" title="Permalink to this headline">¶</a></h2>
<div class="section" id="echo">
<h3>Echo<a class="headerlink" href="#echo" title="Permalink to this headline">¶</a></h3>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?= ?&gt;

e.g.,
&lt;?= $this-&gt;getName() ?&gt;

# instead of
&lt;?php echo $this-&gt;getName() ?&gt;
</pre></div>
</div>
</div>
<div class="section" id="if-else-if">
<h3>IF &amp; ELSE IF<a class="headerlink" href="#if-else-if" title="Permalink to this headline">¶</a></h3>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?php if ($a == 5): ?&gt;

&lt;?php elseif(bool): ?&gt;

&lt;?php else: ?&gt;

&lt;?php end if; ?&gt;
</pre></div>
</div>
</div>
<div class="section" id="for-each">
<h3>For each<a class="headerlink" href="#for-each" title="Permalink to this headline">¶</a></h3>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?php foreach($ibtsRespondedData as $record): ?&gt;
&lt;?php endforeach ?&gt;
</pre></div>
</div>
<p>the built-in function htmlentities(str) (or htmlspecialchars(str)) converts all the special characters to HTML entities (e.g., &gt; to &amp;gt;, &lt; to &amp;lt;, ” to &amp;quot;, &amp; to &amp;amp;). It is important to convert special characters, in particular, &lt; and &gt;, before echoing back to the client to prevent the so-called Cross-Site Scripting attack (XSS).</p>
</div>
</div>
<div class="section" id="string-functions">
<h2>String Functions<a class="headerlink" href="#string-functions" title="Permalink to this headline">¶</a></h2>
<p>strlen(str): returns the length of the given string.
substr(str, start [, length]): returns the substring from start position of length.
strtoupper(str), strtolower(str): return the uppercase/lowecase of the given string.
trim(str): trim whitespaces from the beginning and end of the given string.
rtrim(str): trim whitespaces from the end of the given string.</p>
</div>
<div class="section" id="checking-variables">
<h2>Checking Variables<a class="headerlink" href="#checking-variables" title="Permalink to this headline">¶</a></h2>
<p>You can use the following built-in functions:
isset($var): return TRUE is $var is set and is not NULL.
unset($var): unset the $var.
is_null($var): return TRUE if the $var is NULL.
empty($var): return TRUE if the $var does not exist (i.e. !isset($var)) or its value is equivalent to boolean FALSE (e.g., NULL, 0, 0.0, ‘’, ‘0’, empty array and object).</p>
</div>
<div class="section" id="type-casting-and-conversion">
<h2>Type Casting and Conversion<a class="headerlink" href="#type-casting-and-conversion" title="Permalink to this headline">¶</a></h2>
<p>As an example, there are 3 ways to cast a string to an integer:
intval(): The function intval($str) returns an equivalent integer or 0 if $str does not contain an valid integer. Take note that it cannot handle ‘0’, as the result is ambiguous.
Casting operator (int): same as intval().
settype($var, ‘integer’): convert $var to integer type, and return either TURE/FALSE.</p>
</div>
<div class="section" id="php-design">
<h2>PHP Design<a class="headerlink" href="#php-design" title="Permalink to this headline">¶</a></h2>
<div class="section" id="layout-page">
<h3>Layout Page<a class="headerlink" href="#layout-page" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>You’re assuming that header.php would be called on the every page call. That’s wrong.</li>
<li>You’re assuming that header.php will always be static. That’s wrong.</li>
<li>You forgot to create a template for the page itself.</li>
<li>The main rule everyone have to learn by heart: Not a single character has to be sent into browser, until all data gets ready.</li>
</ul>
</div>
<div class="section" id="why">
<h3>Why?<a class="headerlink" href="#why" title="Permalink to this headline">¶</a></h3>
<p>It’s 2018 today. AJAX era. What if your code will have to send JSONed data instead of whole HTML page?
there is a thing called HTTP header. Sometimes we have to send them. And it’s gets impossible if you already have your ornate HTML header sent.
it’s for just 4-page site. Okay. Imagine you’ve got lucky and got a request for another 4-page site. You will have to change only templates and don’t touch engine files. That’s really great benefit.
Imagine you’re going to make a custom &lt;title&gt; tag for your pages, based on the page content. Isn’t it extremely common thing? But you can’t make it without using templates.
So, you have to have one common site template containing header and footer and also dedicated templates for the every php script.</p>
<p>An example layout is going to be like this:</p>
</div>
<div class="section" id="page-itself">
<h3>1. Page Itself<a class="headerlink" href="#page-itself" title="Permalink to this headline">¶</a></h3>
<p>it outputs nothing but only gather required data and calls a template:</p>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?
   //include our settings, connect to database etc.
   include dirname($_SERVER[&#39;DOCUMENT_ROOT&#39;]).&#39;/cfg/settings.php&#39;;

   //getting required data
   $DATA=dbgetarr(&quot;SELECT * FROM links&quot;);
   $pagetitle = &quot;Links to friend sites&quot;;

   //etc
   //and then call a template:
   $tpl = &quot;links.tpl.php&quot;;
   include &quot;template.php&quot;;
?&gt;
</pre></div>
</div>
</div>
<div class="section" id="template-php-which-is-your-main-site-template">
<h3>2. template.php which is your main site template<a class="headerlink" href="#template-php-which-is-your-main-site-template" title="Permalink to this headline">¶</a></h3>
<p>Consists of your header and footer</p>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;html&gt;
   &lt;head&gt;
      &lt;title&gt;My site. &lt;?=$pagetitle?&gt;&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id=&quot;page&quot;&gt;
         &lt;? include $tpl ?&gt;
      &lt;/div&gt;
   &lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
</div>
<div class="section" id="and-finally-links-tpl-php-is-the-actual-page-template">
<h3>3. and finally links.tpl.php is the actual page template:<a class="headerlink" href="#and-finally-links-tpl-php-is-the-actual-page-template" title="Permalink to this headline">¶</a></h3>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;h2&gt;&lt;?=$pagetitle?&gt;&lt;/h2&gt;
&lt;ul&gt;
   &lt;? foreach($DATA as $row): ?&gt;
      &lt;li&gt;&lt;a href=&quot;&lt;?=$row[&#39;link&#39;]?&gt;&quot; target=&quot;_blank&quot;&gt;&lt;?=$row[&#39;name&#39;]?&gt;&lt;/a&gt;&lt;/li&gt;
   &lt;? endforeach ?&gt;
&lt;ul&gt;
</pre></div>
</div>
<p>easy, clean and maintainable.</p>
</div>
</div>
<div class="section" id="passing-php-form-validate-error-message-back-to-submit-form">
<h2>Passing php form validate error message back to submit form<a class="headerlink" href="#passing-php-form-validate-error-message-back-to-submit-form" title="Permalink to this headline">¶</a></h2>
<p>On a quick glance try this</p>
<div class="section" id="session-way">
<h3>Session way<a class="headerlink" href="#session-way" title="Permalink to this headline">¶</a></h3>
<p>Make sure to start the session by doing session_start(); at the top of the file where saveComment is and the isset checked.</p>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>function saveComment(){
    $id = isset($_POST[&quot;articleId&quot;]) ? $_POST[&quot;articleId&quot;] : &#39;&#39;;

    if ( isset( $_POST[&#39;saveChanges&#39;] ) ) {
       if ( $_POST[&#39;name&#39;] == &quot;&quot; ){
            $_SESSION[&#39;errorMessage&#39;] = &quot;Please fill out your name.&quot;;
            header( &quot;Location:&quot;.HOME_PATH.&quot;/.?action=viewArticle&amp;articleId=&quot;.$_POST[&#39;articleID&#39;].&quot;&quot;);
       }

   if ( isset( $_SESSION[&#39;errorMessage&#39;] ) ) {
       echo $_SESSION[&#39;errorMessage&#39;];
   }
}
</pre></div>
</div>
<p>or you can try</p>
</div>
<div class="section" id="post-way">
<h3>POST way<a class="headerlink" href="#post-way" title="Permalink to this headline">¶</a></h3>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>function saveComment(){
   $id = isset($_POST[&quot;articleId&quot;]) ? $_POST[&quot;articleId&quot;] : &#39;&#39;;

   if ( isset( $_POST[&#39;saveChanges&#39;] ) ) {
      if ( $_POST[&#39;name&#39;] == &quot;&quot; ){
         $error = urlencode(&#39;Please fill out your name&#39;);
         header( &quot;Location:&quot;.HOME_PATH.&quot;/.?action=viewArticle&amp;articleId=&quot;.$_POST[&#39;articleID&#39;]. &quot;&amp;error=&quot; . $error);
      }
      if ( isset( $_GET[&#39;error&#39;] ) ) {
         echo urldecode($_GET[&#39;error&#39;]);
      }
   }
}
</pre></div>
</div>
</div>
<div class="section" id="note">
<h3>Note<a class="headerlink" href="#note" title="Permalink to this headline">¶</a></h3>
<p>You’re setting a variable $validate for your currently executing script. Afterwards, you send a redirect header. This will cause your browser to issue a new request, thus ending the currently executing script and scrapping the variable. The new request will trigger another script invocation, where the variable is not known anymore since it only existed for the duration of the first request.</p>
<p>HTTP is stateless, so every variable you set on the server side will only exist until you finish your current request and respond to the client. What you need is a way to pass this variable to the script handling the second request. There are several ways to do so:</p>
<p>Pass a GET parameter. You could append something like “&amp;validationError=” . $validate[‘errorMessage’] to the URL you’re passing to the Location header, and then in the display page access it via $_GET.
Save the validation status in the $_SESSION. The PHP manual contains a lot of information about sessions (maybe you’re already using them?)
Restructure your code in a way that you don’t redirect on error, but on success.
Some more information on the 3rd proposal: You write one PHP-Script which displays the form and handles the form post request. If validation fails, you simply redisplay, and insert the echo statement you already have. If it suceeds, you redirect to some success page. This way, the variable will remain accessible, since it’s still the same request.</p>
<p>the built-in function htmlentities(str) (or htmlspecialchars(str)) converts all the special characters to HTML entities (e.g., &gt; to &amp;gt;, &lt; to &amp;lt;, ” to &amp;quot;, &amp; to &amp;amp;). It is important to convert special characters, in particular, &lt; and &gt;, before echoing back to the client to prevent the so-called Cross-Site Scripting attack (XSS).</p>
</div>
</div>
<div class="section" id="redirect-to-another-page">
<h2>Redirect to another page<a class="headerlink" href="#redirect-to-another-page" title="Permalink to this headline">¶</a></h2>
<p>header(“Location: home.php”);</p>
</div>
<div class="section" id="check-query-parameters">
<h2>Check query parameters<a class="headerlink" href="#check-query-parameters" title="Permalink to this headline">¶</a></h2>
<p>$slide = ( isset($_GET[“id”]) &amp;&amp; trim($_GET[“id”]) == ‘link1’ ) ? trim ($_GET[“id”]) : ‘’;</p>
</div>
<div class="section" id="id1">
<h2>Session Handling in PHP<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>To use session:
- Start a session via session_start(). The session_start() starts a new session or resume the existing session.
- The superglobal associative array $_SESSION maintain data of the session.
- You can check if a key-value pair exists via isset($_SESSION[‘key’]).
- You can set a key-value pair for this session via $_SESSION[‘key’] = value.
- You can retrieve value of a particular key via $_SESSION[‘key’].
- You can remove a key-value pair via unset($_SESSION[‘key’]).
- You can use function session_id() to retrieve the session ID.
- To terminate the session explicitly, use session_write_close().</p>
<p>The procedure is:
1. Authenticate the user’s credential.
2. Create a new session via session_start(), and place some tokens inside the session, e.g. $_SESSION[‘isLogin’] = TRUE.
3. On all the other pages, resume the session ALSO via session_start(), and check if $_SESSION[‘isLogin’] is there, which indicates a resumed session rather than a new session.</p>
<div class="section" id="id2">
<h3>Session<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>You need make sure to start the session at the top of every PHP file where you want to use the $_SESSION superglobal. Like this:</p>
<div class="code php highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?php
  session_start();
  echo $_SESSION[&#39;youritem&#39;];
?&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="get-the-class-name">
<h2>Get the class name<a class="headerlink" href="#get-the-class-name" title="Permalink to this headline">¶</a></h2>
<p>static::class</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../tools/tools-index.html" class="btn btn-neutral" title="Code Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Kiran Marturu.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>